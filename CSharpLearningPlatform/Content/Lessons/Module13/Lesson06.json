{
  "moduleId": 13,
  "lessonNumber": 6,
  "lessonId": "M13L06",
  "title": "Data Binding (@bind Directive)",
  "simplifierConcept": "Data binding is like a two-way mirror:\n\nONE-WAY (display only):\nC# variable ‚Üí @variable ‚Üí Shows in UI\nIf variable changes, UI updates\n\nTWO-WAY (@bind):\nC# variable ‚ü∑ @bind ‚ü∑ Input field\nVariable changes ‚Üí UI updates\nUser types ‚Üí Variable updates\nIt's AUTOMATIC!\n\nWithout @bind:\n<input value=\"@name\" @oninput=\"e => name = e.Value.ToString()\" />\n\nWith @bind:\n<input @bind=\"name\" />\n\nMuch simpler! Blazor handles sync automatically.\n\nThink: @bind = 'Keep C# variable and UI input perfectly in sync, both ways!'",
  "coderExample": "// SIMPLE BINDING\n<input @bind=\"name\" />\n<p>Hello, @name!</p>\n\n@code {\n    private string name = \"\";\n}\n\n// BINDING WITH DIFFERENT TYPES\n<input @bind=\"age\" type=\"number\" />\n<input @bind=\"birthDate\" type=\"date\" />\n<input type=\"checkbox\" @bind=\"isActive\" />\n<select @bind=\"category\">\n    <option>Electronics</option>\n    <option>Clothing</option>\n</select>\n\n@code {\n    private int age;\n    private DateTime birthDate = DateTime.Now;\n    private bool isActive;\n    private string category = \"Electronics\";\n}\n\n// BINDING EVENTS\n<input @bind=\"searchTerm\" @bind:event=\"oninput\" />\n// Updates on every keystroke!\n\n<input @bind=\"email\" @bind:event=\"onchange\" />\n// Updates when focus lost (default)\n\n// BINDING WITH FORMATTING\n<input @bind=\"price\" @bind:format=\"C2\" />\n// Displays as currency: $99.99\n\n<input @bind=\"date\" @bind:format=\"yyyy-MM-dd\" />\n// Custom date format\n\n// COMPONENT TWO-WAY BINDING\n// Parent:\n<Counter @bind-Count=\"myCount\" />\n<p>Parent knows: @myCount</p>\n\n// Counter component:\n@code {\n    [Parameter]\n    public int Count { get; set; }\n    \n    [Parameter]\n    public EventCallback<int> CountChanged { get; set; }\n    \n    private async Task IncrementCount() {\n        Count++;\n        await CountChanged.InvokeAsync(Count);\n    }\n}\n// Naming: Count + CountChanged",
  "syntaxBreakdown": [
    {
      "codeSnippet": "@bind=\"variable\"",
      "explanation": "Two-way binding. Variable ‚Üî input. User types ‚Üí variable updates. Variable changes ‚Üí input updates. Automatic sync!"
    },
    {
      "codeSnippet": "@bind:event=\"oninput\"",
      "explanation": "Control when binding updates. 'oninput' = every keystroke. 'onchange' = on blur (default for text inputs). Choose based on performance needs."
    },
    {
      "codeSnippet": "@bind:format",
      "explanation": "Format display value. 'C2' = currency. 'yyyy-MM-dd' = date format. 'P' = percentage. Format doesn't change underlying value, just display."
    },
    {
      "codeSnippet": "@bind-PropertyName",
      "explanation": "Component two-way binding. Requires: [Parameter] Property AND [Parameter] PropertyChanged EventCallback. @bind-Count binds to Count parameter."
    }
  ],
  "challenge": {
    "instructions": "Create a User Profile Editor with full data binding!\n\n1. UserProfile model:\n   - string Name\n   - string Email\n   - int Age\n   - DateTime JoinDate\n   - bool IsActive\n   - string Bio (textarea)\n\n2. ProfileEditor component:\n   - Input for Name (@bind, updates live)\n   - Input for Email\n   - Number input for Age\n   - Date input for JoinDate\n   - Checkbox for IsActive\n   - Textarea for Bio\n   - Display preview card showing all values\n   - Show character count for Bio (live update)\n\n3. Demonstrate @bind:event=\"oninput\" for live updates\n\nPrint complete component!",
    "starterCode": "// ProfileEditor.razor\n<div class=\"profile-editor\">\n    <h3>Edit Profile</h3>\n    \n    <div class=\"form-group\">\n        <label>Name:</label>\n        <input @bind=\"profile.Name\" @bind:event=\"oninput\" class=\"form-control\" />\n    </div>\n    \n    <!-- Add other inputs -->\n    \n    <h4>Preview</h4>\n    <div class=\"card\">\n        <h5>@profile.Name</h5>\n        <p>Email: @profile.Email</p>\n        <!-- Show other fields -->\n    </div>\n</div>\n\n@code {\n    private class UserProfile {\n        public string Name { get; set; } = \"\";\n        // Add other properties\n    }\n    \n    private UserProfile profile = new();\n}",
    "solutionCode": "Console.WriteLine(@\"\n// ProfileEditor.razor\nusing System;\n\n<div class=\"\"profile-editor container\"\">\n    <div class=\"\"row\"\">\n        <div class=\"\"col-md-6\"\">\n            <h3>‚úèÔ∏è Edit Profile</h3>\n            \n            <div class=\"\"mb-3\"\">\n                <label class=\"\"form-label\"\">Name:</label>\n                <input @bind=\"\"profile.Name\"\" @bind:event=\"\"oninput\"\" \n                       class=\"\"form-control\"\" placeholder=\"\"Enter your name\"\" />\n            </div>\n            \n            <div class=\"\"mb-3\"\">\n                <label class=\"\"form-label\"\">Email:</label>\n                <input @bind=\"\"profile.Email\"\" type=\"\"email\"\" \n                       class=\"\"form-control\"\" placeholder=\"\"your@email.com\"\" />\n            </div>\n            \n            <div class=\"\"mb-3\"\">\n                <label class=\"\"form-label\"\">Age:</label>\n                <input @bind=\"\"profile.Age\"\" type=\"\"number\"\" \n                       class=\"\"form-control\"\" min=\"\"0\"\" max=\"\"120\"\" />\n            </div>\n            \n            <div class=\"\"mb-3\"\">\n                <label class=\"\"form-label\"\">Join Date:</label>\n                <input @bind=\"\"profile.JoinDate\"\" type=\"\"date\"\" \n                       class=\"\"form-control\"\" />\n            </div>\n            \n            <div class=\"\"mb-3 form-check\"\">\n                <input @bind=\"\"profile.IsActive\"\" type=\"\"checkbox\"\" \n                       class=\"\"form-check-input\"\" id=\"\"activeCheck\"\" />\n                <label class=\"\"form-check-label\"\" for=\"\"activeCheck\"\">Active Member</label>\n            </div>\n            \n            <div class=\"\"mb-3\"\">\n                <label class=\"\"form-label\"\">Bio:</label>\n                <textarea @bind=\"\"profile.Bio\"\" @bind:event=\"\"oninput\"\"\n                          class=\"\"form-control\"\" rows=\"\"4\"\" \n                          placeholder=\"\"Tell us about yourself...\"\">\n                </textarea>\n                <small class=\"\"text-muted\"\">Characters: @profile.Bio.Length / 500</small>\n            </div>\n        </div>\n        \n        <div class=\"\"col-md-6\"\">\n            <h3>üëÅÔ∏è Live Preview</h3>\n            <div class=\"\"card\"\">\n                <div class=\"\"card-body\"\">\n                    <h5 class=\"\"card-title\"\">@(string.IsNullOrEmpty(profile.Name) ? \"\"(No name)\"\" : profile.Name)</h5>\n                    \n                    <p class=\"\"card-text\"\">\n                        <strong>Email:</strong> @(string.IsNullOrEmpty(profile.Email) ? \"\"(Not provided)\"\" : profile.Email)<br/>\n                        <strong>Age:</strong> @profile.Age years<br/>\n                        <strong>Member Since:</strong> @profile.JoinDate.ToString(\"\"MMM dd, yyyy\"\")<br/>\n                        <strong>Status:</strong> \n                        <span class=\"\"badge bg-@(profile.IsActive ? \\\"\"success\\\"\" : \\\"\"secondary\\\"\")\"\">\n                            @(profile.IsActive ? \"\"Active\"\" : \"\"Inactive\"\")\n                        </span>\n                    </p>\n                    \n                    @if (!string.IsNullOrEmpty(profile.Bio))\n                    {\n                        <hr />\n                        <p class=\"\"card-text\"\">\n                            <strong>Bio:</strong><br/>\n                            @profile.Bio\n                        </p>\n                    }\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n\n@code {\n    private class UserProfile {\n        public string Name { get; set; } = \"\"\"\";\n        public string Email { get; set; } = \"\"\"\";\n        public int Age { get; set; } = 18;\n        public DateTime JoinDate { get; set; } = DateTime.Now;\n        public bool IsActive { get; set; } = true;\n        public string Bio { get; set; } = \"\"\"\";\n    }\n    \n    private UserProfile profile = new();\n}\n\"\");\n\nConsole.WriteLine(@\"\n=== DATA BINDING FEATURES ===\");\nConsole.WriteLine(\"‚úì @bind for two-way sync\");\nConsole.WriteLine(\"‚úì @bind:event=\\\"oninput\\\" for live updates\");\nConsole.WriteLine(\"‚úì Works with: string, int, DateTime, bool\");\nConsole.WriteLine(\"‚úì Input, textarea, checkbox, select all supported\");\nConsole.WriteLine(\"‚úì Live preview updates as you type!\");\nConsole.WriteLine(\"\\n‚úì No manual event handlers needed!\");",
    "hint": "@bind=\"variable\" for two-way binding. @bind:event=\"oninput\" for live updates. Works with strings, numbers, dates, bools. Automatic sync both ways!",
    "expectedOutputPatterns": ["ProfileEditor", "@bind", "@bind:event", "Live Preview", "two-way"],
    "validationRules": [],
    "commonStickingPoints": [
      "Type mismatch: @bind with type=\"number\" on string? Won't work! Variable type must match input type. int with number, string with text, bool with checkbox.",
      "Format vs culture: @bind:format=\"C\" uses current culture! En-US = $, En-GB = ¬£. Be aware for international apps. Use @bind:culture to specify.",
      "Binding performance: @bind:event=\"oninput\" on large list? Slow! Updates on every keystroke. Use onchange (default) for better performance when possible.",
      "Component binding naming: For @bind-Count, need Count AND CountChanged (exact naming!). If mismatch, binding won't work. Convention: Property + PropertyChanged."
    ]
  }
}
