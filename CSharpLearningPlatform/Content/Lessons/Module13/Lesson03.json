{
  "moduleId": 13,
  "lessonNumber": 3,
  "lessonId": "M13L03",
  "title": "Creating Razor Components (Building Blocks)",
  "simplifierConcept": "Components are like LEGO blocks:\n\n• Each block (component) is self-contained\n• Blocks snap together to build complex structures\n• Reuse the same block many times\n• Each block has its own logic and appearance\n\nButton.razor = reusable button component\nCard.razor = reusable card component  \nNavBar.razor = reusable navigation\n\nComponents have:\n• MARKUP (HTML) - What it looks like\n• LOGIC (@code) - How it behaves\n• PARAMETERS - Customization options\n• EVENTS - Communication with parents\n\nThink: Component = 'Self-contained, reusable UI piece with its own HTML, CSS, and C# logic!'",
  "coderExample": "// SIMPLE COMPONENT\n// Alert.razor\n<div class=\"alert alert-info\">\n    <p>@Message</p>\n</div>\n\n@code {\n    [Parameter]\n    public string Message { get; set; } = \"\";\n}\n\n// USING THE COMPONENT\n// Home.razor\n<Alert Message=\"Welcome to Blazor!\" />\n<Alert Message=\"This is reusable!\" />\n\n// COMPONENT WITH LOGIC\n// Counter.razor\n<div class=\"counter-box\">\n    <h4>@Title</h4>\n    <p>Count: @currentCount</p>\n    <button @onclick=\"Increment\">+</button>\n    <button @onclick=\"Decrement\">-</button>\n    <button @onclick=\"Reset\">Reset</button>\n</div>\n\n@code {\n    [Parameter]\n    public string Title { get; set; } = \"Counter\";\n    \n    [Parameter]\n    public int InitialValue { get; set; } = 0;\n    \n    private int currentCount;\n    \n    protected override void OnInitialized()\n    {\n        currentCount = InitialValue;\n    }\n    \n    private void Increment() => currentCount++;\n    private void Decrement() => currentCount--;\n    private void Reset() => currentCount = InitialValue;\n}\n\n// USING WITH PARAMETERS\n<Counter Title=\"Score\" InitialValue=\"100\" />\n<Counter Title=\"Lives\" InitialValue=\"3\" />\n\n// COMPONENT LIFECYCLE\n/*\n1. OnInitialized() - Component created\n2. OnParametersSet() - Parameters received\n3. Render - UI drawn\n4. OnAfterRender() - After render complete\n5. Dispose() - Component destroyed\n*/",
  "syntaxBreakdown": [
    {
      "codeSnippet": "[Parameter]",
      "explanation": "Makes property a component parameter. Can be set from parent: <MyComponent Title=\"Hello\" />. Must be public property with [Parameter] attribute."
    },
    {
      "codeSnippet": "OnInitialized()",
      "explanation": "Lifecycle method called once when component created. Use for initialization, loading data. Override with 'protected override void OnInitialized()'."
    },
    {
      "codeSnippet": "<ComponentName />",
      "explanation": "Use component in parent. Self-closing if no child content. Pass parameters as attributes: <Alert Message=\"text\" />."
    },
    {
      "codeSnippet": "Component file structure",
      "explanation": ".razor file with: HTML markup at top, @code block at bottom. Component name MUST match filename! Alert.razor contains Alert component."
    }
  ],
  "challenge": {
    "instructions": "Create a reusable ProductCard component!\n\n1. ProductCard.razor component:\n   - Parameters: string Name, decimal Price, string ImageUrl, bool InStock\n   - Display product in card layout\n   - Show \"In Stock\" or \"Out of Stock\" badge\n   - Button \"Add to Cart\" (only enabled if InStock)\n   - OnAddToCart event callback\n\n2. Create ProductList component that uses ProductCard:\n   - Display 3 ProductCard components\n   - Handle AddToCart event\n   - Show count of items in cart\n\n3. Print both component structures\n\nThis demonstrates component reusability!",
    "starterCode": "// ProductCard.razor\n<div class=\"card\">\n    <img src=\"@ImageUrl\" alt=\"@Name\" />\n    <h4>@Name</h4>\n    <p class=\"price\">$@Price</p>\n    \n    @if (InStock)\n    {\n        <span class=\"badge-success\">In Stock</span>\n        <button @onclick=\"HandleAddToCart\">Add to Cart</button>\n    }\n    else\n    {\n        <span class=\"badge-danger\">Out of Stock</span>\n    }\n</div>\n\n@code {\n    [Parameter]\n    public string Name { get; set; } = \"\";\n    \n    [Parameter]\n    public decimal Price { get; set; }\n    \n    [Parameter]\n    public string ImageUrl { get; set; } = \"\";\n    \n    [Parameter]\n    public bool InStock { get; set; }\n    \n    [Parameter]\n    public EventCallback OnAddToCart { get; set; }\n    \n    private async Task HandleAddToCart()\n    {\n        await OnAddToCart.InvokeAsync();\n    }\n}\n\n// ProductList.razor\n<h3>Our Products</h3>\n\n<div class=\"product-grid\">\n    <ProductCard \n        Name=\"Laptop\" \n        Price=\"999.99m\" \n        ImageUrl=\"laptop.jpg\"\n        InStock=\"true\"\n        OnAddToCart=\"() => AddToCart(\\\"Laptop\\\")\" />\n    \n    <!-- Add 2 more ProductCard components -->\n</div>\n\n<p>Cart Items: @cartCount</p>\n\n@code {\n    private int cartCount = 0;\n    \n    private void AddToCart(string productName)\n    {\n        cartCount++;\n        // In real app: add to cart service\n    }\n}",
    "solutionCode": "using System;\n\nConsole.WriteLine(@\"\n=== PRODUCTCARD COMPONENT ===\");\nConsole.WriteLine(@\"\n// ProductCard.razor\n<div class=\"\"card\"\">\n    <img src=\"\"@ImageUrl\"\" alt=\"\"@Name\"\" style=\"\"width:100%\"\" />\n    <div class=\"\"card-body\"\">\n        <h4>@Name</h4>\n        <p class=\"\"price\"\" style=\"\"font-size:1.5em\"\">$@Price.ToString(\\\"\"F2\\\"\")</p>\n        \n        @if (InStock)\n        {\n            <span class=\"\"badge bg-success\"\">✓ In Stock</span>\n            <button class=\"\"btn btn-primary\"\" @onclick=\"\"HandleAddToCart\"\">Add to Cart</button>\n        }\n        else\n        {\n            <span class=\"\"badge bg-danger\"\">✗ Out of Stock</span>\n            <button class=\"\"btn btn-secondary\"\" disabled>Unavailable</button>\n        }\n    </div>\n</div>\n\n@code {\n    [Parameter]\n    public string Name { get; set; } = \"\"\"\";\n    \n    [Parameter]\n    public decimal Price { get; set; }\n    \n    [Parameter]\n    public string ImageUrl { get; set; } = \"\"\"\";\n    \n    [Parameter]\n    public bool InStock { get; set; }\n    \n    [Parameter]\n    public EventCallback<string> OnAddToCart { get; set; }\n    \n    private async Task HandleAddToCart()\n    {\n        await OnAddToCart.InvokeAsync(Name);\n    }\n}\n\"\");\n\nConsole.WriteLine(@\"\n=== PRODUCTLIST COMPONENT ===\");\nConsole.WriteLine(@\"\n// ProductList.razor\n<div class=\"\"container\"\">\n    <h3>Our Products</h3>\n    \n    <div class=\"\"alert alert-info\"\">\n        <strong>Cart Items: @cartCount</strong>\n    </div>\n    \n    <div class=\"\"row\"\">\n        <div class=\"\"col-md-4\"\">\n            <ProductCard \n                Name=\"\"Laptop\"\" \n                Price=\"\"999.99m\"\" \n                ImageUrl=\"\"laptop.jpg\"\"\n                InStock=\"\"true\"\"\n                OnAddToCart=\"\"AddToCart\"\" />\n        </div>\n        \n        <div class=\"\"col-md-4\"\">\n            <ProductCard \n                Name=\"\"Mouse\"\" \n                Price=\"\"29.99m\"\" \n                ImageUrl=\"\"mouse.jpg\"\"\n                InStock=\"\"true\"\"\n                OnAddToCart=\"\"AddToCart\"\" />\n        </div>\n        \n        <div class=\"\"col-md-4\"\">\n            <ProductCard \n                Name=\"\"Monitor\"\" \n                Price=\"\"399.99m\"\" \n                ImageUrl=\"\"monitor.jpg\"\"\n                InStock=\"\"false\"\"\n                OnAddToCart=\"\"AddToCart\"\" />\n        </div>\n    </div>\n</div>\n\n@code {\n    private int cartCount = 0;\n    private List<string> cartItems = new();\n    \n    private void AddToCart(string productName)\n    {\n        cartCount++;\n        cartItems.Add(productName);\n        Console.WriteLine($\"\"Added {productName} to cart! Total: {cartCount}\"\");\n    }\n}\n\"\");\n\nConsole.WriteLine(@\"\n=== KEY CONCEPTS ===\");\nConsole.WriteLine(\"✓ [Parameter] - Makes property configurable from parent\");\nConsole.WriteLine(\"✓ EventCallback - Parent can respond to child events\");\nConsole.WriteLine(\"✓ Component reuse - Same ProductCard, different data\");\nConsole.WriteLine(\"✓ Conditional rendering - @if for In Stock badge\");\nConsole.WriteLine(\"\\n✓ ONE component definition → MANY instances!\");",
    "hint": "[Parameter] for inputs. EventCallback<T> for events. @if for conditional rendering. Pass parameters as attributes. await callback.InvokeAsync() to trigger parent method.",
    "expectedOutputPatterns": ["ProductCard", "ProductList", "[Parameter]", "EventCallback", "InStock"],
    "validationRules": [],
    "commonStickingPoints": [
      "Parameter must be public: [Parameter] on private property doesn't work! Must be 'public string Name { get; set; }'. Public + [Parameter] attribute required.",
      "Forgetting @: In markup, '@Name' accesses parameter. Just 'Name' without @ is treated as literal text! Always use @ for C# variables/properties.",
      "EventCallback type: EventCallback (no data) or EventCallback<T> (with data). Use InvokeAsync() to trigger: 'await OnClick.InvokeAsync(value);'.",
      "Component filename mismatch: Alert.razor must contain component named Alert. Filename and component name MUST match exactly (case-sensitive!)."
    ]
  }
}
