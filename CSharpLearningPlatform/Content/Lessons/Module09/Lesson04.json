{
  "moduleId": 9,
  "lessonNumber": 4,
  "lessonId": "M09L04",
  "title": "Transforming with .Select() (The Transformation Machine)",
  "simplifierConcept": "Imagine a factory machine that takes raw materials and TRANSFORMS them:\n• Input: Raw wood → Output: Furniture\n• Input: Fruit → Output: Juice\n• Input: Cotton → Output: T-shirts\n\nThat's .Select() - it TRANSFORMS each item in a collection:\n• Input: List of numbers → Output: Each number squared\n• Input: List of people → Output: Just their names\n• Input: List of products → Output: Just their prices\n\n.Where() FILTERS (keeps some items), .Select() TRANSFORMS (changes each item)!\n\nYou can transform to:\n• Same type: numbers → numbers * 2\n• Different type: Person objects → string names\n• New anonymous objects: { Name = p.Name, IsAdult = p.Age >= 18 }\n\nThink: .Select() = 'Transform every item in the collection using this recipe.'",
  "coderExample": "using System;\nusing System.Collections.Generic;\nusing System.Linq;\n\nList<int> numbers = new List<int> { 1, 2, 3, 4, 5 };\n\n// Transform to same type\nvar squared = numbers.Select(n => n * n);\nConsole.WriteLine(\"Squared: \" + string.Join(\", \", squared));\n\nvar doubled = numbers.Select(n => n * 2);\nConsole.WriteLine(\"Doubled: \" + string.Join(\", \", doubled));\n\n// Transform with objects\nclass Person\n{\n    public string Name;\n    public int Age;\n    public string City;\n}\n\nList<Person> people = new List<Person>\n{\n    new Person { Name = \"Alice\", Age = 30, City = \"NYC\" },\n    new Person { Name = \"Bob\", Age = 25, City = \"LA\" },\n    new Person { Name = \"Charlie\", Age = 35, City = \"Chicago\" }\n};\n\n// Extract just names (object → string)\nvar names = people.Select(p => p.Name);\nConsole.WriteLine(\"Names: \" + string.Join(\", \", names));\n\n// Extract ages (object → int)\nvar ages = people.Select(p => p.Age);\nConsole.WriteLine(\"Ages: \" + string.Join(\", \", ages));\n\n// Transform to new anonymous object\nvar summaries = people.Select(p => new \n{ \n    Name = p.Name, \n    IsAdult = p.Age >= 18,\n    Location = p.City\n});\n\nforeach (var summary in summaries)\n{\n    Console.WriteLine(summary.Name + \" - Adult: \" + summary.IsAdult + \" - \" + summary.Location);\n}\n\n// Combine .Where() and .Select()\nvar adultNames = people\n    .Where(p => p.Age >= 30)\n    .Select(p => p.Name);\n\nConsole.WriteLine(\"Adults (30+): \" + string.Join(\", \", adultNames));",
  "syntaxBreakdown": [
    {
      "codeSnippet": "collection.Select(x => transformation)",
      "explanation": "Select() transforms each item. Returns IEnumerable with transformed items. EVERY item is transformed (unlike Where which filters)."
    },
    {
      "codeSnippet": "Same type transform",
      "explanation": "numbers.Select(n => n * 2) takes int, returns int. But creates NEW collection - original unchanged!"
    },
    {
      "codeSnippet": "Type change transform",
      "explanation": "people.Select(p => p.Name) takes Person, returns string. Output type changes! IEnumerable<Person> → IEnumerable<string>."
    },
    {
      "codeSnippet": "Anonymous object: new { }",
      "explanation": "Create unnamed object on-the-fly: 'new { Prop1 = value, Prop2 = value }'. Great for reshaping data! Type inferred by compiler."
    }
  ],
  "challenge": {
    "instructions": "Build a product summary report using .Select()!\n\n1. Create a 'Product' class:\n   - string Name\n   - decimal Price\n   - string Category\n   - int Stock\n\n2. Create a List with 5+ products\n\n3. Use .Select() to create:\n   - List of just product names\n   - List of prices with 10% discount applied\n   - List of anonymous objects with:\n     - Name\n     - Category\n     - TotalValue (Price * Stock)\n     - InStock (Stock > 0)\n\n4. Use .Where().Select() to get names of products under $100\n\n5. Display all results",
    "starterCode": "using System;\nusing System.Collections.Generic;\nusing System.Linq;\n\nclass Product\n{\n    public string Name;\n    public decimal Price;\n    public string Category;\n    public int Stock;\n}\n\nList<Product> products = new List<Product>\n{\n    new Product { Name = \"Laptop\", Price = 999, Category = \"Electronics\", Stock = 5 },\n    // Add 4 more products\n};\n\n// Extract names\nvar productNames = products.Select(p => /* transform */);\n\n// Calculate discounted prices\nvar discountedPrices = products.Select(p => /* transform */);\n\n// Create summary objects\nvar summaries = products.Select(p => new\n{\n    // Properties\n});\n\n// Names of affordable products\nvar affordableNames = products\n    .Where(p => /* filter */)\n    .Select(p => /* transform */);",
    "solutionCode": "using System;\nusing System.Collections.Generic;\nusing System.Linq;\n\nclass Product\n{\n    public string Name;\n    public decimal Price;\n    public string Category;\n    public int Stock;\n}\n\nList<Product> products = new List<Product>\n{\n    new Product { Name = \"Laptop\", Price = 999, Category = \"Electronics\", Stock = 5 },\n    new Product { Name = \"Mouse\", Price = 25, Category = \"Electronics\", Stock = 50 },\n    new Product { Name = \"Keyboard\", Price = 75, Category = \"Electronics\", Stock = 30 },\n    new Product { Name = \"Monitor\", Price = 299, Category = \"Electronics\", Stock = 0 },\n    new Product { Name = \"Webcam\", Price = 89, Category = \"Electronics\", Stock = 15 }\n};\n\nvar productNames = products.Select(p => p.Name);\nConsole.WriteLine(\"Product names: \" + string.Join(\", \", productNames));\n\nvar discountedPrices = products.Select(p => p.Price * 0.9m);\nConsole.WriteLine(\"\\nDiscounted prices: $\" + string.Join(\", $\", discountedPrices));\n\nvar summaries = products.Select(p => new\n{\n    Name = p.Name,\n    Category = p.Category,\n    TotalValue = p.Price * p.Stock,\n    InStock = p.Stock > 0\n});\n\nConsole.WriteLine(\"\\nProduct summaries:\");\nforeach (var s in summaries)\n{\n    Console.WriteLine(s.Name + \" (\" + s.Category + \") - Value: $\" + s.TotalValue + \" - In stock: \" + s.InStock);\n}\n\nvar affordableNames = products\n    .Where(p => p.Price < 100)\n    .Select(p => p.Name);\n\nConsole.WriteLine(\"\\nAffordable products: \" + string.Join(\", \", affordableNames));",
    "hint": "Select syntax: '.Select(item => newValue)'. Extract property: 'p => p.Name'. Calculate: 'p => p.Price * 0.9m'. Anonymous object: 'new { Prop = value }'.",
    "expectedOutputPatterns": ["Product names", "Discounted prices", "Affordable products"],
    "validationRules": [],
    "commonStickingPoints": [
      "Confusing .Where() and .Select(): Where FILTERS (fewer items). Select TRANSFORMS (same number, but changed). Don't use Select for filtering!",
      "Forgetting to capture result: '.Select()' doesn't modify original! 'list.Select(x => x * 2)' does nothing. Must assign: 'var result = list.Select(x => x * 2)'.",
      "Anonymous object outside method: Anonymous objects can't be returned from methods or stored in fields! Only use locally. For return values, create a proper class.",
      "Decimal precision: When doing math with prices, use 'm' suffix: '0.9m' not '0.9'. Otherwise you get double (less precise for money!)."
    ]
  }
}
