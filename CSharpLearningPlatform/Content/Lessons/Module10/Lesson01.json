{
  "moduleId": 10,
  "lessonNumber": 1,
  "lessonId": "M10L01",
  "title": "Synchronous vs. Asynchronous (Restaurant Buzzer Analogy)",
  "simplifierConcept": "Imagine two ways to get food:\n\nSYNCHRONOUS (blocking):\n• You order at counter\n• You WAIT in line, doing NOTHING\n• Only after you get food can you sit down\n• Everyone behind you is BLOCKED!\n\nASYNCHRONOUS (non-blocking):\n• You order at counter\n• They give you a BUZZER\n• You sit down, chat, check your phone (do other things!)\n• Buzzer goes off when food is ready\n• You pick up food\n• Others can order while you wait!\n\nThat's the difference!\n\nSYNCHRONOUS code: Each line waits for the previous one to FINISH. Program is frozen during slow operations (file I/O, web requests, database queries).\n\nASYNCHRONOUS code: Start slow operation, do OTHER WORK while waiting, come back when it's done. App stays responsive!\n\nThink: Async = 'Don't wait around doing nothing. Start the task and come back when it's ready!'",
  "coderExample": "using System;\nusing System.Threading;\nusing System.Threading.Tasks;\n\n// SYNCHRONOUS - blocks the thread\nvoid DownloadFileSync()\n{\n    Console.WriteLine(\"Starting download...\");\n    Thread.Sleep(3000);  // Simulates slow operation (3 seconds)\n    Console.WriteLine(\"Download complete!\");\n}\n\nConsole.WriteLine(\"Program start\");\nDownloadFileSync();  // Program FREEZES for 3 seconds!\nConsole.WriteLine(\"Doing other work\");  // Has to wait!\n\n// Output:\n// Program start\n// Starting download...\n// (3 second pause - frozen!)\n// Download complete!\n// Doing other work\n\n// ASYNCHRONOUS - doesn't block\nasync Task DownloadFileAsync()\n{\n    Console.WriteLine(\"Starting download...\");\n    await Task.Delay(3000);  // Async delay - doesn't block!\n    Console.WriteLine(\"Download complete!\");\n}\n\nConsole.WriteLine(\"Program start\");\nTask downloadTask = DownloadFileAsync();  // Starts, doesn't wait!\nConsole.WriteLine(\"Doing other work\");  // Runs immediately!\nawait downloadTask;  // Now wait for it to finish\nConsole.WriteLine(\"All done\");\n\n// Output:\n// Program start\n// Starting download...\n// Doing other work  (happens DURING download!)\n// (after 3 seconds)\n// Download complete!\n// All done\n\n// Real-world example: Multiple downloads\nasync Task Main()\n{\n    Console.WriteLine(\"Starting 3 downloads...\");\n    \n    Task d1 = DownloadFileAsync(\"File1\");\n    Task d2 = DownloadFileAsync(\"File2\");\n    Task d3 = DownloadFileAsync(\"File3\");\n    \n    // All 3 run SIMULTANEOUSLY!\n    await Task.WhenAll(d1, d2, d3);\n    \n    Console.WriteLine(\"All downloads complete!\");\n    // Takes 3 seconds total, not 9!\n}",
  "syntaxBreakdown": [
    {
      "codeSnippet": "Thread.Sleep() vs Task.Delay()",
      "explanation": "Thread.Sleep() BLOCKS the thread (synchronous). Task.Delay() is ASYNC - releases thread while waiting. Always prefer Task.Delay() in async code!"
    },
    {
      "codeSnippet": "async Task MethodName()",
      "explanation": "'async' keyword marks method as asynchronous. Return type is usually 'Task' (void equivalent) or 'Task<T>' (returns T). Enables 'await' inside."
    },
    {
      "codeSnippet": "await expression",
      "explanation": "'await' says 'pause here until this Task completes, but release the thread for other work.' Can only use inside 'async' method."
    },
    {
      "codeSnippet": "Task.WhenAll()",
      "explanation": "Runs multiple async operations simultaneously! Waits for ALL to complete. Much faster than running one-by-one."
    }
  ],
  "challenge": {
    "instructions": "Simulate a coffee shop with async operations!\n\n1. Create async method 'BrewCoffeeAsync(string type)':\n   - Print 'Brewing [type] coffee...'\n   - await Task.Delay(2000) to simulate brewing\n   - Print '[type] coffee ready!'\n   - Return Task\n\n2. Create async method 'ToastBreadAsync()':\n   - Print 'Toasting bread...'\n   - await Task.Delay(1000)\n   - Print 'Toast ready!'\n   - Return Task\n\n3. In Main (or top-level):\n   - Start brewing coffee (don't await yet!)\n   - Start toasting bread (don't await yet!)\n   - Print 'Doing other tasks...'\n   - await BOTH tasks\n   - Print 'Breakfast ready!'\n\nBoth should run SIMULTANEOUSLY!",
    "starterCode": "using System;\nusing System.Threading.Tasks;\n\nasync Task BrewCoffeeAsync(string type)\n{\n    // Print starting message\n    // await Task.Delay(2000)\n    // Print ready message\n}\n\nasync Task ToastBreadAsync()\n{\n    // Print starting message\n    // await Task.Delay(1000)\n    // Print ready message\n}\n\n// Main async code\nConsole.WriteLine(\"Starting breakfast...\");\n\n// Start both tasks\nTask coffeeTask = BrewCoffeeAsync(\"Espresso\");\nTask toastTask = ToastBreadAsync();\n\nConsole.WriteLine(\"Doing other tasks...\");\n\n// Wait for both\nawait Task.WhenAll(coffeeTask, toastTask);\n\nConsole.WriteLine(\"Breakfast ready!\");",
    "solutionCode": "using System;\nusing System.Threading.Tasks;\n\nasync Task BrewCoffeeAsync(string type)\n{\n    Console.WriteLine(\"Brewing \" + type + \" coffee...\");\n    await Task.Delay(2000);\n    Console.WriteLine(type + \" coffee ready!\");\n}\n\nasync Task ToastBreadAsync()\n{\n    Console.WriteLine(\"Toasting bread...\");\n    await Task.Delay(1000);\n    Console.WriteLine(\"Toast ready!\");\n}\n\nConsole.WriteLine(\"Starting breakfast...\");\n\nTask coffeeTask = BrewCoffeeAsync(\"Espresso\");\nTask toastTask = ToastBreadAsync();\n\nConsole.WriteLine(\"Doing other tasks...\");\n\nawait Task.WhenAll(coffeeTask, toastTask);\n\nConsole.WriteLine(\"Breakfast ready!\");",
    "hint": "Async method: 'async Task MethodName()'. Inside: 'await Task.Delay(milliseconds)'. Start without await: 'Task t = MethodAsync()'. Wait for multiple: 'await Task.WhenAll(t1, t2)'.",
    "expectedOutputPatterns": ["Brewing", "Toasting", "Doing other tasks", "ready"],
    "validationRules": [],
    "commonStickingPoints": [
      "Forgetting 'await': If you call 'MethodAsync()' without 'await', it starts but you don't wait for it! The method continues immediately. Use 'await' when you need the result.",
      "Using Thread.Sleep() in async: NEVER use Thread.Sleep() in async methods! It blocks the thread. Always use 'await Task.Delay()' instead.",
      "Async void: Only use 'async void' for event handlers! For regular methods, use 'async Task'. 'async void' can't be awaited and swallows exceptions.",
      "Not understanding concurrency: Async doesn't mean parallel! In single-threaded context, it's about not blocking. Tasks run concurrently (interleaved), but might not be truly parallel."
    ]
  }
}
