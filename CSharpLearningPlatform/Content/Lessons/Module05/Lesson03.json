{
  "moduleId": 5,
  "lessonNumber": 3,
  "lessonId": "M05L03",
  "title": "Dictionaries (Key-Value Pairs)",
  "simplifierConcept": "Arrays and Lists use INDEX (0, 1, 2...):\n\nstring[] names = { \"Alice\", \"Bob\", \"Charlie\" };\nConsole.WriteLine(names[1]);  // \"Bob\"\n// But what if you want to look up by NAME not number?\n\nDictionary uses KEYS instead of indexes!\n\nDictionary<string, string> phonebook = new Dictionary<string, string>();\nphonebook[\"Alice\"] = \"555-1234\";\nphonebook[\"Bob\"] = \"555-5678\";\n\nConsole.WriteLine(phonebook[\"Alice\"]);  // \"555-1234\"\n// Look up by KEY (\"Alice\"), get VALUE (\"555-1234\")!\n\nReal-world dictionaries:\nüìñ Word ‚Üí Definition\nüó∫Ô∏è Country ‚Üí Capital\nüì± Name ‚Üí Phone number\nüí∞ Product ‚Üí Price\n\nThink: Dictionary = Phone book where you look things up by name, not page number!",
  "coderExample": "// CREATING DICTIONARIES\nusing System.Collections.Generic;\n\n// Empty dictionary\nDictionary<string, int> ages = new Dictionary<string, int>();\n\n// Initialize with values\nDictionary<string, string> capitals = new Dictionary<string, string>\n{\n    { \"USA\", \"Washington DC\" },\n    { \"France\", \"Paris\" },\n    { \"Japan\", \"Tokyo\" }\n};\n\n// ADDING ITEMS\nages[\"Alice\"] = 25;  // Add or update\nages[\"Bob\"] = 30;\nages.Add(\"Charlie\", 28);  // Alternative syntax\n\n// ACCESSING VALUES\nConsole.WriteLine(ages[\"Alice\"]);  // 25\nConsole.WriteLine(capitals[\"Japan\"]);  // \"Tokyo\"\n\n// UPDATING VALUES\nages[\"Alice\"] = 26;  // Update Alice's age\n\n// CHECKING IF KEY EXISTS\nif (ages.ContainsKey(\"Bob\"))\n{\n    Console.WriteLine($\"Bob is {ages[\"Bob\"]} years old\");\n}\n\nif (!ages.ContainsKey(\"Diana\"))\n{\n    Console.WriteLine(\"Diana not in dictionary\");\n}\n\n// SAFE ACCESS - TryGetValue\nif (ages.TryGetValue(\"Alice\", out int aliceAge))\n{\n    Console.WriteLine($\"Alice's age: {aliceAge}\");\n}\nelse\n{\n    Console.WriteLine(\"Alice not found\");\n}\n\n// REMOVING ITEMS\nages.Remove(\"Bob\");\n\n// COUNT\nConsole.WriteLine($\"Dictionary has {ages.Count} items\");\n\n// LOOPING THROUGH DICTIONARY\nforeach (KeyValuePair<string, int> pair in ages)\n{\n    Console.WriteLine($\"{pair.Key} is {pair.Value} years old\");\n}\n\n// Shorter syntax\nforeach (var pair in ages)\n{\n    Console.WriteLine($\"{pair.Key}: {pair.Value}\");\n}\n\n// Just keys\nforeach (string name in ages.Keys)\n{\n    Console.WriteLine(name);\n}\n\n// Just values\nforeach (int age in ages.Values)\n{\n    Console.WriteLine(age);\n}\n\n// PRACTICAL: Product prices\nDictionary<string, double> prices = new Dictionary<string, double>\n{\n    { \"Laptop\", 999.99 },\n    { \"Mouse\", 25.50 },\n    { \"Keyboard\", 75.00 }\n};\n\nConsole.WriteLine(\"Enter product name:\");\nstring product = Console.ReadLine();\n\nif (prices.ContainsKey(product))\n{\n    Console.WriteLine($\"{product}: ${prices[product]}\");\n}\nelse\n{\n    Console.WriteLine(\"Product not found\");\n}\n\n// PRACTICAL: Word counter\nstring text = \"the quick brown fox jumps over the lazy dog\";\nstring[] words = text.Split(' ');\n\nDictionary<string, int> wordCount = new Dictionary<string, int>();\n\nforeach (string word in words)\n{\n    if (wordCount.ContainsKey(word))\n    {\n        wordCount[word]++;  // Increment count\n    }\n    else\n    {\n        wordCount[word] = 1;  // First occurrence\n    }\n}\n\nforeach (var pair in wordCount)\n{\n    Console.WriteLine($\"{pair.Key}: {pair.Value} times\");\n}\n\n// PRACTICAL: Grade lookup\nDictionary<string, char> studentGrades = new Dictionary<string, char>\n{\n    { \"Alice\", 'A' },\n    { \"Bob\", 'B' },\n    { \"Charlie\", 'A' },\n    { \"Diana\", 'C' }\n};\n\nConsole.WriteLine(\"Enter student name:\");\nstring student = Console.ReadLine();\n\nif (studentGrades.TryGetValue(student, out char grade))\n{\n    Console.WriteLine($\"{student} received grade: {grade}\");\n}\nelse\n{\n    Console.WriteLine(\"Student not found\");\n}\n\n// PRACTICAL: Settings storage\nDictionary<string, string> settings = new Dictionary<string, string>\n{\n    { \"theme\", \"dark\" },\n    { \"language\", \"en\" },\n    { \"fontSize\", \"14\" }\n};\n\nsettings[\"theme\"] = \"light\";  // Update setting\nsettings[\"notifications\"] = \"on\";  // Add new setting\n\nConsole.WriteLine(\"Current settings:\");\nforeach (var setting in settings)\n{\n    Console.WriteLine($\"{setting.Key} = {setting.Value}\");\n}",
  "syntaxBreakdown": [
    {
      "codeSnippet": "Dictionary<TKey, TValue>",
      "explanation": "Dictionary with key type and value type. Dictionary<string, int> uses string keys, int values. Dictionary<int, string> uses int keys, string values. Both types required!"
    },
    {
      "codeSnippet": "dict[key] = value",
      "explanation": "Add or update entry. If key exists, updates value. If key doesn't exist, adds new entry. dict[\\\"Alice\\\"] = 25 adds/updates Alice."
    },
    {
      "codeSnippet": ".ContainsKey(key)",
      "explanation": "Check if key exists. Returns true/false. ALWAYS check before accessing! dict[\\\"Bob\\\"] crashes if Bob not in dictionary. Use if (dict.ContainsKey(\\\"Bob\\\"))."
    },
    {
      "codeSnippet": ".TryGetValue(key, out value)",
      "explanation": "Safe way to get value. Returns true if found (value set), false if not found. Prevents crashes. Better than ContainsKey + access separately."
    }
  ],
  "challenge": {
    "instructions": "Create an inventory system with product lookup!\n\n1. Create Dictionary<string, int> for product quantities\n2. Create Dictionary<string, double> for product prices\n3. Pre-populate with items:\n   - \"Laptop\" (qty: 5, price: 999.99)\n   - \"Mouse\" (qty: 20, price: 25.50)\n   - \"Keyboard\" (qty: 15, price: 75.00)\n   - \"Monitor\" (qty: 8, price: 299.99)\n4. Menu options:\n   - Check stock (enter product, show quantity and price)\n   - Add stock (enter product and amount to add)\n   - Sell item (enter product and amount, subtract from stock)\n   - List all products with quantities and prices\n   - Calculate total inventory value\n   - Exit\n5. Validate product exists before operations\n\nExample:\n1. Check stock\nProduct: Laptop\nLaptop: 5 in stock @ $999.99 each\n\n3. Sell item\nProduct: Mouse\nQuantity: 5\nSold 5 Mouse. Remaining: 15",
    "starterCode": "// Inventory System\n\nusing System.Collections.Generic;\n\nDictionary<string, int> quantities = new Dictionary<string, int>\n{\n    { \"Laptop\", 5 },\n    { \"Mouse\", 20 },\n    { \"Keyboard\", 15 },\n    { \"Monitor\", 8 }\n};\n\nDictionary<string, double> prices = new Dictionary<string, double>\n{\n    { \"Laptop\", 999.99 },\n    { \"Mouse\", 25.50 },\n    { \"Keyboard\", 75.00 },\n    { \"Monitor\", 299.99 }\n};\n\nwhile (true)\n{\n    // Show menu\n    // Handle choices\n}",
    "solutionCode": "// Inventory System\n\nusing System.Collections.Generic;\n\nDictionary<string, int> quantities = new Dictionary<string, int>\n{\n    { \"Laptop\", 5 },\n    { \"Mouse\", 20 },\n    { \"Keyboard\", 15 },\n    { \"Monitor\", 8 }\n};\n\nDictionary<string, double> prices = new Dictionary<string, double>\n{\n    { \"Laptop\", 999.99 },\n    { \"Mouse\", 25.50 },\n    { \"Keyboard\", 75.00 },\n    { \"Monitor\", 299.99 }\n};\n\nwhile (true)\n{\n    Console.WriteLine(\"\\n=== INVENTORY SYSTEM ===\");\n    Console.WriteLine(\"1. Check stock\");\n    Console.WriteLine(\"2. Add stock\");\n    Console.WriteLine(\"3. Sell item\");\n    Console.WriteLine(\"4. List all\");\n    Console.WriteLine(\"5. Total value\");\n    Console.WriteLine(\"6. Exit\");\n    \n    string choice = Console.ReadLine();\n    \n    if (choice == \"1\")\n    {\n        Console.WriteLine(\"Product name:\");\n        string product = Console.ReadLine();\n        \n        if (quantities.ContainsKey(product))\n        {\n            Console.WriteLine($\"{product}: {quantities[product]} in stock @ ${prices[product]} each\");\n        }\n        else\n        {\n            Console.WriteLine(\"Product not found\");\n        }\n    }\n    else if (choice == \"2\")\n    {\n        Console.WriteLine(\"Product name:\");\n        string product = Console.ReadLine();\n        \n        if (quantities.ContainsKey(product))\n        {\n            Console.WriteLine(\"Amount to add:\");\n            int amount = int.Parse(Console.ReadLine());\n            quantities[product] += amount;\n            Console.WriteLine($\"Added {amount}. New stock: {quantities[product]}\");\n        }\n        else\n        {\n            Console.WriteLine(\"Product not found\");\n        }\n    }\n    else if (choice == \"3\")\n    {\n        Console.WriteLine(\"Product name:\");\n        string product = Console.ReadLine();\n        \n        if (quantities.ContainsKey(product))\n        {\n            Console.WriteLine(\"Quantity to sell:\");\n            int amount = int.Parse(Console.ReadLine());\n            \n            if (amount <= quantities[product])\n            {\n                quantities[product] -= amount;\n                Console.WriteLine($\"Sold {amount}. Remaining: {quantities[product]}\");\n            }\n            else\n            {\n                Console.WriteLine(\"Insufficient stock!\");\n            }\n        }\n        else\n        {\n            Console.WriteLine(\"Product not found\");\n        }\n    }\n    else if (choice == \"4\")\n    {\n        Console.WriteLine(\"\\n=== ALL PRODUCTS ===\");\n        foreach (var product in quantities.Keys)\n        {\n            Console.WriteLine($\"{product}: {quantities[product]} @ ${prices[product]}\");\n        }\n    }\n    else if (choice == \"5\")\n    {\n        double total = 0;\n        foreach (var product in quantities.Keys)\n        {\n            total += quantities[product] * prices[product];\n        }\n        Console.WriteLine($\"Total inventory value: ${total:F2}\");\n    }\n    else if (choice == \"6\")\n    {\n        break;\n    }\n}",
    "hint": "Check if key exists with .ContainsKey(key). Access value with dict[key]. Update with dict[key] += amount or dict[key] -= amount. Loop with foreach (var key in dict.Keys). Multiply quantity * price for value.",
    "expectedOutputPatterns": ["stock", "Product", "Total", "value"],
    "validationRules": [],
    "commonStickingPoints": [
      "Key not found exception: dict[\\\"missing\\\"] crashes if key doesn't exist! ALWAYS check first: if (dict.ContainsKey(key)) { var val = dict[key]; } or use TryGetValue.",
      "Key type matters: Dictionary<string, int> keys are case-sensitive! dict[\\\"Alice\\\"] and dict[\\\"alice\\\"] are DIFFERENT keys. Use .ToLower() for case-insensitive.",
      "Add vs bracket syntax: dict.Add(key, val) throws error if key exists! dict[key] = val adds if missing, updates if exists. Bracket syntax safer for most cases.",
      "Iterating while modifying: Can't add/remove during foreach! foreach (var k in dict.Keys) { dict.Remove(x); } ERROR! Copy keys first: var keys = new List<string>(dict.Keys);"
    ]
  }
}
