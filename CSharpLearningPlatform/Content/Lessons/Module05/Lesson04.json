{
  "moduleId": 5,
  "lessonNumber": 4,
  "lessonId": "M05L04",
  "title": "Iterating Collections (foreach Loop)",
  "simplifierConcept": "You've learned to CREATE collections (arrays, lists, dictionaries). Now learn to WORK with them efficiently!\n\nThe FOREACH loop is your best friend for collections:\n\n❌ OLD WAY (with for loop):\nfor (int i = 0; i < names.Length; i++)\n{\n    Console.WriteLine(names[i]);\n}\n\n✅ NEW WAY (with foreach):\nforeach (string name in names)\n{\n    Console.WriteLine(name);\n}\n\nForeach is:\n✅ Simpler - no index variable needed\n✅ Safer - can't go out of bounds\n✅ Cleaner - less code to write\n✅ Works with ALL collections (arrays, lists, dictionaries)\n\nThink: foreach = \"for each item in this collection, do something\"",
  "coderExample": "using System;\nusing System.Collections.Generic;\n\n// FOREACH WITH ARRAYS\nstring[] fruits = { \"Apple\", \"Banana\", \"Orange\", \"Grape\" };\n\nConsole.WriteLine(\"=== Fruits ===\");\nforeach (string fruit in fruits)\n{\n    Console.WriteLine($\"I like {fruit}!\");\n}\n\n// FOREACH WITH LISTS\nList<int> scores = new List<int> { 95, 87, 92, 78, 88 };\n\nConsole.WriteLine(\"\\n=== Scores ===\");\nforeach (int score in scores)\n{\n    Console.WriteLine($\"Score: {score}\");\n}\n\n// CALCULATING WITH FOREACH\nint total = 0;\nforeach (int score in scores)\n{\n    total += score;\n}\ndouble average = (double)total / scores.Count;\nConsole.WriteLine($\"\\nTotal: {total}, Average: {average:F2}\");\n\n// FINDING WITH FOREACH\nint searchFor = 92;\nbool found = false;\n\nforeach (int score in scores)\n{\n    if (score == searchFor)\n    {\n        Console.WriteLine($\"\\nFound {searchFor}!\");\n        found = true;\n        break;\n    }\n}\n\nif (!found)\n{\n    Console.WriteLine($\"\\n{searchFor} not found\");\n}\n\n// COUNTING WITH FOREACH\nint passingCount = 0;\nforeach (int score in scores)\n{\n    if (score >= 60)\n    {\n        passingCount++;\n    }\n}\nConsole.WriteLine($\"\\nPassing scores: {passingCount}\");\n\n// USEFUL COLLECTION METHODS\nList<string> shoppingCart = new List<string>();\n\n// .Add - add items\nshoppingCart.Add(\"Milk\");\nshoppingCart.Add(\"Bread\");\nshoppingCart.Add(\"Eggs\");\nConsole.WriteLine($\"\\nCart has {shoppingCart.Count} items\");\n\n// .Contains - check if item exists\nif (shoppingCart.Contains(\"Milk\"))\n{\n    Console.WriteLine(\"Milk is in the cart\");\n}\n\n// .Remove - remove item\nshoppingCart.Remove(\"Bread\");\nConsole.WriteLine($\"After removing bread: {shoppingCart.Count} items\");\n\n// .Clear - remove all\nshoppingCart.Clear();\nConsole.WriteLine($\"After clearing: {shoppingCart.Count} items\");\n\n// SORTING (Arrays)\nint[] numbers = { 5, 2, 8, 1, 9 };\nArray.Sort(numbers);  // Sorts in place: 1, 2, 5, 8, 9\n\nConsole.WriteLine(\"\\n=== Sorted Numbers ===\");\nforeach (int num in numbers)\n{\n    Console.Write(num + \" \");\n}\n\n// SORTING (Lists)\nList<string> names = new List<string> { \"Charlie\", \"Alice\", \"Bob\" };\nnames.Sort();  // Alphabetical\n\nConsole.WriteLine(\"\\n\\n=== Sorted Names ===\");\nforeach (string name in names)\n{\n    Console.WriteLine(name);\n}\n\n// REVERSING\nnames.Reverse();  // Reverse order\nConsole.WriteLine(\"\\n=== Reversed ===\");\nforeach (string name in names)\n{\n    Console.WriteLine(name);\n}\n\n// PRACTICAL: Finding min/max manually\nint[] ages = { 25, 30, 18, 45, 22, 35 };\nint oldest = ages[0];\nint youngest = ages[0];\n\nforeach (int age in ages)\n{\n    if (age > oldest)\n        oldest = age;\n    if (age < youngest)\n        youngest = age;\n}\n\nConsole.WriteLine($\"\\nOldest: {oldest}, Youngest: {youngest}\");\n\n// FOREACH WITH DICTIONARIES\nDictionary<string, int> inventory = new Dictionary<string, int>\n{\n    { \"Apples\", 50 },\n    { \"Oranges\", 30 },\n    { \"Bananas\", 25 }\n};\n\nConsole.WriteLine(\"\\n=== Inventory ===\");\nforeach (KeyValuePair<string, int> item in inventory)\n{\n    Console.WriteLine($\"{item.Key}: {item.Value} units\");\n}\n\n// Can also use var\nforeach (var item in inventory)\n{\n    if (item.Value < 40)\n    {\n        Console.WriteLine($\"Low stock: {item.Key}\");\n    }\n}",
  "syntaxBreakdown": [
    {
      "codeSnippet": "foreach (type item in collection)",
      "explanation": "Iterates through each element. 'type' matches collection type (int for int[], string for string[]). 'item' is current element. 'collection' is what to iterate."
    },
    {
      "codeSnippet": ".Count vs .Length",
      "explanation": "Lists use .Count property. Arrays use .Length property. Both tell you number of elements. No parentheses - they're properties not methods!"
    },
    {
      "codeSnippet": ".Add(item)",
      "explanation": "Adds item to end of List. list.Add(5) appends 5. Can't use with arrays - they're fixed size!"
    },
    {
      "codeSnippet": ".Contains(item)",
      "explanation": "Returns true if item exists in collection, false otherwise. Works with Lists, arrays (using Array methods), dictionaries. list.Contains(\"Bob\") checks if \"Bob\" is in list."
    },
    {
      "codeSnippet": "Array.Sort() / list.Sort()",
      "explanation": "Sorts collection in place. Array.Sort(array) for arrays. list.Sort() for lists. Ascending order (smallest to largest, A to Z)."
    }
  ],
  "challenge": {
    "instructions": "Create a grade book manager!\n\n1. Create a List<string> for student names\n2. Create a List<int> for their grades\n3. Add 5 students with their grades (use .Add)\n4. Display all students with their grades using foreach\n5. Calculate:\n   - Total of all grades\n   - Average grade\n   - Highest grade (find manually with foreach)\n   - Lowest grade (find manually with foreach)\n6. Count how many students passed (grade >= 60)\n7. Sort grades and display sorted list\n8. Check if a specific grade exists using .Contains\n\nExample output:\n=== GRADE BOOK ===\nAlice: 85\nBob: 72\nCharlie: 91\nDiana: 68\nEve: 95\n\nTotal: 411\nAverage: 82.2\nHighest: 95\nLowest: 68\nPassed: 5/5\n\nSorted grades: 68, 72, 85, 91, 95\nContains 90? False",
    "starterCode": "// Grade Book Manager\n\nusing System;\nusing System.Collections.Generic;\n\nList<string> names = new List<string>();\nList<int> grades = new List<int>();\n\n// Add 5 students\nnames.Add(\"Alice\");\ngrades.Add(85);\n// Add 4 more...\n\n// Display all students\nConsole.WriteLine(\"=== GRADE BOOK ===\");\nfor (int i = 0; i < names.Count; i++)\n{\n    Console.WriteLine($\"{names[i]}: {grades[i]}\");\n}\n\n// Calculate statistics using foreach\n\n// Sort and display",
    "solutionCode": "// Grade Book Manager\n\nusing System;\nusing System.Collections.Generic;\n\nList<string> names = new List<string>();\nList<int> grades = new List<int>();\n\n// Add 5 students\nnames.Add(\"Alice\");\ngrades.Add(85);\nnames.Add(\"Bob\");\ngrades.Add(72);\nnames.Add(\"Charlie\");\ngrades.Add(91);\nnames.Add(\"Diana\");\ngrades.Add(68);\nnames.Add(\"Eve\");\ngrades.Add(95);\n\n// Display all students\nConsole.WriteLine(\"=== GRADE BOOK ===\");\nfor (int i = 0; i < names.Count; i++)\n{\n    Console.WriteLine($\"{names[i]}: {grades[i]}\");\n}\n\n// Calculate total and average\nint total = 0;\nforeach (int grade in grades)\n{\n    total += grade;\n}\ndouble average = (double)total / grades.Count;\n\n// Find highest and lowest\nint highest = grades[0];\nint lowest = grades[0];\nforeach (int grade in grades)\n{\n    if (grade > highest)\n        highest = grade;\n    if (grade < lowest)\n        lowest = grade;\n}\n\n// Count passing\nint passedCount = 0;\nforeach (int grade in grades)\n{\n    if (grade >= 60)\n        passedCount++;\n}\n\nConsole.WriteLine($\"\\nTotal: {total}\");\nConsole.WriteLine($\"Average: {average:F1}\");\nConsole.WriteLine($\"Highest: {highest}\");\nConsole.WriteLine($\"Lowest: {lowest}\");\nConsole.WriteLine($\"Passed: {passedCount}/{grades.Count}\");\n\n// Sort and display\nList<int> sortedGrades = new List<int>(grades);  // Copy first\nsortedGrades.Sort();\n\nConsole.Write(\"\\nSorted grades: \");\nforeach (int grade in sortedGrades)\n{\n    Console.Write(grade + \" \");\n}\n\n// Check contains\nConsole.WriteLine($\"\\n\\nContains 90? {grades.Contains(90)}\");",
    "hint": "Use foreach to iterate and calculate. Track highest/lowest with if statements. Use .Sort() to sort list. Use .Contains() to check if value exists. Cast to double for average: (double)total / count.",
    "expectedOutputPatterns": ["GRADE BOOK", "Total", "Average", "Highest", "Lowest"],
    "validationRules": [],
    "commonStickingPoints": [
      "Modifying during foreach: Can't add/remove items while foreaching! foreach (var x in list) { list.Remove(x); } crashes! Use regular for loop to modify.",
      "No index in foreach: foreach doesn't give you position. If you need index, use for loop: for (int i = 0; i < list.Count; i++).",
      "Count vs Length: Lists use .Count (no parentheses!). Arrays use .Length (no parentheses!). Both are properties, not methods.",
      "Array.Sort vs list.Sort: Arrays need Array.Sort(array). Lists use array.Sort(). Different syntax for same operation!"
    ]
  }
}
